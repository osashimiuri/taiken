/* --- 1. 全体のリセットとベースカラー --- */
html, body {
  padding: 0; margin: 0;
  height: 100%; width: 100%;
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
  
  /* ★ベースカラー：清潔感のある薄いブルーグレー */
  background-color: #F3F5FA; 
  color: #333; /* 文字は読みやすい黒に近いグレー */
}

.app-container {
  display: flex; flex-direction: column;
  height: 100%; width: 100%;
}

/* --- 2. ヘッダー --- */
#app-header {
  height: 50px; 
  background: #ffffff; /* ヘッダーは白でスッキリ */
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 16px; 
  border-bottom: 1px solid #e0e0e0; /* 薄い線 */
  flex-shrink: 0; 
  z-index: 500; 
  position: relative; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.03); /* ほんのり影 */
}
.header-center h1 { margin: 0; font-size: 16px; font-weight: bold; color: #333; }
.dummy-back-btn { font-size: 24px; color: #333; cursor: pointer; }

/* --- 3. 地図エリア（40%） --- */
#map-section {
  height: 40%; 
  position: relative; width: 100%; 
  border-bottom: 1px solid #ddd;
  flex-shrink: 0;
}
#viewDiv { position: absolute; top: 0; bottom: 0; left: 0; right: 0; }
.esri-ui-top-left { top: 10px !important; }
.esri-attribution { display: none; } 

/* 地図切り替えボタン */
#basemap-toggle-btn {
  position: absolute; bottom: 20px; left: 16px;
  width: 56px; height: 56px; 
  background: white; border-radius: 12px; /* 少し丸く */
  box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
  z-index: 10; cursor: pointer; border: 2px solid white; padding: 0; overflow: hidden;
  transition: all 0.2s;
}
.icon-layer {
  width: 100%; height: 100%;
  background-size: cover; background-position: center;
  background-image: url("eisei.jpg"); 
}
#basemap-toggle-btn.satellite .icon-layer {
  background-image: url("hakutizu.png");
}

/* --- 4. 作品リストエリア（60%） --- */
#art-section {
  height: 60%; 
  /* 背景色をベースカラーに合わせて統一感を出す */
  background: #F3F5FA; 
  width: 100%; position: relative; display: flex; flex-direction: column;
  flex-shrink: 0;
  flex-grow: 1; 
}

/* スクロール案内 */
.scroll-hint {
  text-align: center;
  font-size: 11px;
  color: #888;
  margin: 10px 0 5px 0;
  flex-shrink: 0;
}

#card-carousel {
  width: 100%; height: 100%; display: flex;
  overflow-x: auto; scroll-snap-type: x mandatory; 
  align-items: flex-start; /* 上揃え */
  padding-top: 5px; 
  padding-left: 50vw; padding-right: 50vw; box-sizing: border-box;
}
#card-carousel::-webkit-scrollbar { display: none; }

.empty-message {
  position: absolute; left: 0; right: 0; text-align: center; 
  color: #999; font-size: 14px; top: 40%;
}

/* --- 5. 作品カード（モダンデザイン） --- */
.art-card {
  scroll-snap-align: center; flex-shrink: 0;
  width: 85vw; 
  height: calc(100% - 60px);
  margin: 0 10px; 
  background: #ffffff;  
  border-radius: 16px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
  display: flex; flex-direction: column;
  overflow: hidden;   
  /* ★ここ！普段の枠線（りりあたんセレクト） */
  border: 2px solid #EBEDF4; 
  transition: all 0.3s;
}

/* 選択中のカード */
.art-card.active-card {
  /* ★ここ！選択中はピンと同じオレンジ色に！ */
  border-color: #F57F32;  
  box-shadow: 0 8px 25px rgba(245, 127, 50, 0.2);
  transform: translateY(-2px);
}

/* カード画像エリア（バネ設定） */
.art-card-img-container {
  width: 100%; 
  height: auto;
  flex: 1; /* 余ったスペースを埋める */
  min-height: 0;
  background-color: #eee; flex-shrink: 0;
}
.art-card-img {
  width: 100%; height: 100%; object-fit: cover; display: block;
}

/* カード情報エリア */
.art-info {
  flex: 0 0 auto; /* 必要分だけ */
  padding: 16px;
  display: flex; flex-direction: column; justify-content: flex-start;
  overflow-y: hidden;
  background: #fff;
}

.art-title { font-size: 17px; font-weight: bold; color: #333; margin-bottom: 6px; }

/* タグ（オレンジテーマ） */
.tags-wrapper { margin-bottom: 8px; }
.hazard-tag {
  display: inline-block;
  font-size: 10px;
  color: #F57F32; /* 文字はオレンジ */
  background-color: #fff;
  padding: 3px 8px;
  border-radius: 4px;
  border: 1px solid #F57F32; /* 枠線もオレンジ */
  margin-top: 4px; margin-right: 5px;
}

.art-message { 
  font-size: 13px; color: #000000; line-height: 1.6; 
  overflow-y: auto; margin-bottom: 0;
}

/* --- 6. 詳細を見るボタン（完熟オレンジ） --- */
.detail-btn {
  /* ★ここが主役！オレンジ色 */
  background-color: #F57F32; 
  color: #fff;
  text-align: center;
  padding: 12px 0;
  
  /* 丸っこいカプセル型 */
  border-radius: 50px; 
  
  margin-top: 12px;
  font-size: 14px; font-weight: bold;
  cursor: pointer; flex-shrink: 0;
  box-shadow: 0 4px 10px rgba(245, 127, 50, 0.3); /* オレンジの光る影 */
  transition: transform 0.1s;
}
.detail-btn:active { transform: scale(0.98); }

/* --- 7. 詳細モーダル（3階建て） --- */
.detail-overlay {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: #F3F5FA; /* モーダル背景も統一 */
  z-index: 1000;
  display: flex; flex-direction: column;
  animation: slideUp 0.3s ease-out;
}
@keyframes slideUp {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* 1階：ヘッダー */
.detail-header-bar {
  height: 50px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 16px;
  border-bottom: 1px solid #e0e0e0;
  background: white;
}
.detail-header-title { font-weight: bold; font-size: 16px; color: #333; }
.close-flat-btn { font-size: 28px; color: #888; background: none; border: none; cursor: pointer; padding: 0 8px; }

/* 2階：画像エリア（詳細ズーム機能付き） */
.detail-fixed-image-area {
  height: auto; 
  min-height: 250px; /* 最小高さ確保 */
  background: #E8EBF2; /* 少し濃いめのグレーで画像を際立たせる */
  flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  border-bottom: 1px solid #e0e0e0;
  
  overflow: hidden; 
  padding-bottom: 30px; /* 文字用の予約席 */
  box-sizing: border-box;
  
  cursor: zoom-in; touch-action: none; position: relative;
}
.detail-fixed-image-area.active { cursor: grab; }
.detail-fixed-image-area.active:active { cursor: grabbing; }

/* 詳細画像（大きく表示） */
#detail-img {
  width: 100%; height: auto; 
  max-height: 55vh; /* 縦長すぎ防止 */
  object-fit: contain; 
  display: block;
  transition: transform 0.1s ease-out;
  transform-origin: center center;
  will-change: transform;
}

/* 案内メッセージ（予約席に配置） */
.zoom-hint {
  position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%);
  color: #888888; font-size: 11px; font-weight: normal;
  pointer-events: none; opacity: 1; transition: opacity 0.3s;
  display: flex; align-items: center; gap: 4px;
}
.detail-fixed-image-area.active .zoom-hint { opacity: 0; }

/* 3階：テキストエリア（白背景） */
.detail-scrollable-content {
  flex-grow: 1; overflow-y: auto; background: white;
}
.detail-text-area { padding: 24px; }
#detail-author{ font-size: 20px; font-weight: bold; margin: 0 0 8px 0; color: #333; }
.detail-divider { margin: 24px 0; border: none; border-top: 1px solid #eee; }

.detail-section { margin-bottom: 30px; }
.detail-section h3 {
  font-size: 15px; font-weight: bold; color: #F57F32; /* 見出しもオレンジ */
  margin: 0 0 8px 0;
  display: flex; align-items: center; gap: 6px;
}
.detail-section p { font-size: 14px; color: #000000; line-height: 1.8; margin: 0; }

#detail-tag-container .hazard-tag { font-size: 12px; padding: 4px 10px; }

/* --- 8. 勧誘エリア（チケット風） --- */
.invite-container {
  /* オレンジの点線枠 */
  border: 2px dashed #F57F32; 
  background-color: #FFF8F0; /* 薄いオレンジ背景 */
  border-radius: 16px;
  
  padding: 24px 16px;
  text-align: center;
  margin-top: 30px;
  display: flex; flex-direction: column; align-items: center;
  color: #5d4037; /* 茶色っぽい文字 */
}
.invite-title { font-size: 16px; font-weight: bold; margin-bottom: 8px; color: #F57F32; }
.invite-text { font-size: 13px; color: #000000; margin-bottom: 20px; text-align: center; }

.invite-btn {
  background-color: #F57F32; color: #fff; 
  border: none; border-radius: 50px;
  padding: 12px 30px; font-size: 14px; font-weight: bold; cursor: pointer;
  text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
  box-shadow: 0 4px 10px rgba(245, 127, 50, 0.3);
}

/* リスト内の勧誘カード */
.invite-card {
  border: 2px dashed #F57F32;
  background-color: #FFF8F0;
  justify-content: center; align-items: center;
  box-shadow: none;
}
.invite-icon { font-size: 40px; margin-bottom: 16px; color: #F57F32; }
.invite-card .invite-title { color: #F57F32; }